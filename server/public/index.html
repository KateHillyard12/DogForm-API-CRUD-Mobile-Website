<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta breed="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GIMM 285 Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="Styling/stylesheets/stylesheet.css" />
</head>

<body>
  <div id="custom-cursor">
    <img src="Styling/images/BrownPawPrint.png" alt="Custom Cursor" />
  </div>

  <h1>Dog Form Data</h1>
  <div id="border"></div>

  <div class="container">
    <div class="row">
      <div class="nav">
        <ul class="menu-hover-fill flex flex-col items-start leading-none text-2xl uppercase space-y-4">
          <li><a href="insert.html" data-text="ADD PUPPY!">ADD PUPPY!</a></li>
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <h2>FIND YOUR DREAM DOG:</h2>
        <form id="DogForm">
          <label for="breed" class="slide-in">What breed type are you looking for?</label>
          <select id="breed" class="slide-in">
            <option value=""></option>
            <option value="toy">Toy</option>
            <option value="work">Work</option>
            <option value="herd">Herd</option>
            <option value="sport">Sport</option>
          </select>
          <div class="row mb-3">
            <div id="breed-error" class="col-12 text-danger">&nbsp;</div>
          </div>

          <label for="fur" class="slide-in">What fur type best suites your needs?</label>
          <select id="fur" class="slide-in">
            <option value=""></option>
            <option value="1">Smooth</option>
            <option value="2">Rough</option>
            <option value="3">Corded</option>
            <option value="4">Double</option>
            <option value="5">Silky</option>
            <option value="6">Curly/Wavy</option>
            <option value="7">Wire</option>
            <option value="8">Hairless</option>
          </select>

          <div class="row mb-3">
            <div id="fur-error" class="col-12 text-danger">&nbsp;</div>
          </div>

          <label for="color" class="slide-in">What color or color combo do you have in mind?</label>
          <input type="text" id="color" class="slide-in" />
          <div class="row mb-3">
            <div id="color-error" class="col-12 text-danger">&nbsp;</div>
          </div>

          <label for="energy" class="slide-in">What energy level fits your lifestyle?</label>
          <select id="energy" class="slide-in">
            <option value=""></option>
            <option value="low">Low</option>
            <option value="med">Medium</option>
            <option value="high">High</option>
          </select>
          <div class="row mb-3">
            <div id="energy-error" class="col-12 text-danger">&nbsp;</div>
          </div>

          <label for="size" class="slide-in">What size dog are you looking for? (Please provide an estimate
            weight in lbs)</label>
          <input type="text" id="size" class="slide-in" />
          <div class="row mb-3">
            <div id="size-error" class="col-12 text-danger">&nbsp;</div>
          </div>
        </form>
      </div>
      <div class="row mb-3">
        <div class="col-md-2">
          <label class="slide-in">Limit Search</label>
        </div>
        <div class="col-md-10">
            <input id='limit' class="slide-in" type='number' min="0" onkeydown="return false" />
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <button id="search">SEARCH FOR DREAM DOG</button>
        </div>
      </div>
    </div>
  </div>

  <img src="Styling/images/Scout_RUNNING.gif" alt="Moving Image" class="image">

  <div class="table-container">
    <table id="dog_breeds" class="overflow">
      Dog Form goes here.
    </table>
  </div>

  <script>
    // JavaScript to trigger the animation
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll(".slide-in").forEach(function (element) {
        element.classList.add("active");
      });
    });
    document.addEventListener("DOMContentLoaded", function () {
      var cursor = document.getElementById("custom-cursor");

      // Show the cursor when the page is loaded
      cursor.style.display = "block";

      //handles the click event
      function handleClick(event) {
        // Create a new image element for the paw print
        var pawPrint = document.createElement("img");
        pawPrint.src = "Styling/images/BrownPawPrint.png";
        pawPrint.classList.add("paw-print");

        // Calculate the position of the paw print relative to the viewport
        var pawPrintSize = 40; // Assuming the size of the cursor image is 40x40 pixels
        var pawPrintX = event.clientX - pawPrintSize / 2;
        var pawPrintY = event.clientY - pawPrintSize / 2 + window.pageYOffset; // Add scroll offset

        // Set the position of the paw print
        pawPrint.style.position = "absolute";
        pawPrint.style.left = pawPrintX + "px";
        pawPrint.style.top = pawPrintY + "px";

        // Set the size of the paw print
        pawPrint.style.width = pawPrintSize + "px";
        pawPrint.style.height = pawPrintSize + "px";

        // Append the paw print to the body
        document.body.appendChild(pawPrint);
      }

      // Add click event listener to the document
      document.addEventListener("click", handleClick);

      // Update cursor position on scroll
      window.addEventListener("scroll", function () {
        var x = event.clientX;
        var y = event.clientY + window.pageYOffset;
        cursor.style.left = x + "px";
        cursor.style.top = y + "px";
      });


      document.addEventListener("mousemove", function (event) {
        var x = event.clientX;
        var y = event.clientY;
        cursor.style.left = x + "px";
        cursor.style.top = y + "px";
      });

      // Update cursor position on scroll
      window.addEventListener("scroll", function () {
        var x = event.clientX;
        var y = event.clientY + window.pageYOffset;
        cursor.style.left = x + "px";
        cursor.style.top = y + "px";
      });
    });



  



    const isEmpty = (obj) => Object.keys(obj).length === 0;

    document.getElementById("search").addEventListener("click", (event) => {
      const getParameters = {};

      if (document.getElementById('breed').value.length !== 0) {
        getParameters.breed = document.getElementById('breed').value;
        //formData.append('breed', document.getElementById('breed').value);
      }
      if (document.getElementById('fur').value.length !== 0) {
        getParameters.fur = document.getElementById('fur').value;
        //formData.append('fur', document.getElementById('fur').value);
      }
      if (document.getElementById('color').value.length !== 0) {
        getParameters.color = document.getElementById('color').value;
        //formData.append('color', document.getElementById('color').value);
      }
      if (document.getElementById('energy').value.length !== 0) {
        getParameters.energy = document.getElementById('energy').value;
        //formData.append('energy', document.getElementById('energy').value);
      }
      if (document.getElementById('size').value.length !== 0) {
        getParameters.size = document.getElementById('size').value;
        //formData.append('size', document.getElementById('size').value);
      }
      if (document.getElementById('limit').value.length !== 0) {
        getParameters.limit = document.getElementById('limit').value;
        //formData.append('limit', document.getElementById('limit').value);
      }

      //Settings for FETCH API request
      let fetchSettings = {
        method: 'GET',
        //body: formData
      };

      fetch("http://localhost/dogs/" + (!isEmpty(getParameters) ? '?' + new URLSearchParams(getParameters) : ''), fetchSettings)
        .then((response) => {
          return new Promise((resolve) => response.json()
            .then((json) => resolve({
              status: response.status,
              json,
            })
            ));
        })
        .then(({ status, json }) => {
          if (status === 200) {
            let displayTable =
              "<table>" +
              "<thead>" +
              "<tr>" +
              '<th width="20%">Breed name</th>' +
              '<th width="10%">Type</th>' +
              '<th width="10%">Fur</th>' +
              '<th width="10%">Color</th>' +
              '<th width="10%">Energy</th>' +
              '<th width="10%">Size</th>' +
              '<th width=5%></th>' +
              '<th width=5%></th>' +
              "</tr>" +
              "</thead>" +
              "<tbody>";
            if (typeof json.data !== 'undefined') {
              for (row of json.data) {
                displayTable +=
                  "<tr>" +
                  "<td>" +
                  row.name +
                  "</td>" +
                  "<td>" +
                  row.breed +
                  "</td>" +
                  "<td>" +
                  row.type +
                  "</td>" +
                  "<td>" +
                  row.color +
                  "</td>" +
                  "<td>" +
                  row.energy +
                  "</td>" +
                  "<td>" +
                  row.size +
                  "</td>" +
                  "<td>" +
                  '<td><a href="update.html?id=' + row.dogId + '"> Update </a></td>' +
                  '<td><a href="delete.html?id=' + row.dogId + '"> Delete </a></td>' +
                  '</tr>';
              }
            }
            displayTable += "</tbody></table>";
            document.getElementById("dog_breeds").innerHTML = displayTable;
          }
        })
        .catch((error) => {
          console.error("Error:", error);
        });
      return;
    });



  </script>
</body>

</html>